<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Minichord UI</title>
  <link rel="icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA/4QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEREQAAAAAAEAAAEAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==">
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
    .status-header { display: flex; justify-content: space-between; align-items: center; }
    .status-header h1 { font-size: 24px; margin: 0; }
    .connection-status { padding: 8px 12px; border-radius: 5px; display: flex; align-items: center; }
    .connection-status.connected { background: #d4edda; color: #155724; }
    .connection-status.disconnected { background: #f8d7da; color: #721c24; }
    #dot { margin-right: 5px; }
    #control { margin: 20px 0; }
    .section { margin: 10px 0; }
    .section h5 { margin: 5px 0; font-size: 14px; }
    .controls { display: flex; gap: 10px; flex-wrap: wrap; }
    .button_div { display: flex; align-items: center; gap: 5px; }
    .select_container { display: flex; align-items: center; gap: 5px; }
    .label { font-size: 12px; }
    button { padding: 8px 16px; border: none; border-radius: 4px; cursor: pointer; background: #007bff; color: white; }
    button:hover { background: #0056b3; }
    .container { display: flex; justify-content: center; position: relative; }
    svg { max-width: 100%; height: auto; }
    .chord-button { fill: #ccc; stroke: #333; stroke-width: 1; cursor: pointer; }
    .chord-button:hover { fill: #aaa; }
    .sharp-button, .rhythm-button { fill: #666; stroke: #333; stroke-width: 1; cursor: pointer; }
    .sharp-button:hover, .rhythm-button:hover { fill: #555; }
    .harp-plate { fill: #ddd; cursor: pointer; }
    .harp-plate:hover { fill: #bbb; }
    .pot { fill: #888; stroke: #333; stroke-width: 2; cursor: pointer; }
    .pot:hover { fill: #666; }
    .preset-button { fill: #999; stroke: #333; stroke-width: 1; cursor: pointer; }
    .preset-button:hover { fill: #777; }
    .led { stroke: #333; stroke-width: 1; }
    .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; }
    .modal-content { background: white; margin: 5% auto; padding: 20px; width: 90%; max-width: 800px; max-height: 80vh; overflow-y: auto; border-radius: 8px; }
    .close-button { float: right; cursor: pointer; font-size: 20px; }
    .modal-buttons { margin-top: 20px; text-align: right; }
    .parameter-group { margin-bottom: 20px; }
    .parameter-row { display: flex; align-items: center; margin: 10px 0; gap: 10px; }
    .parameter-row label { flex: 0 0 200px; font-size: 14px; }
    .slider-container { display: flex; gap: 10px; }
    .slider { width: 200px; }
    .value-input { width: 60px; padding: 5px; }
    select { width: 200px; padding: 5px; border-radius: 4px; }
    .rhythm-grid { display: grid; grid-template-columns: 80px repeat(16, 40px); gap: 5px; margin-bottom: 20px; }
    .rhythm-row { display: contents; }
    .rhythm-cell { text-align: center; }
    .rhythm-cell input[type="checkbox"] { margin: 0; }
    details { margin: 20px 0; }
    .instruction_steps { margin: 10px 0; padding-left: 20px; font-size: 14px; }
    #instruction_zone { margin: 20px 0; font-size: 14px; }
    #ambient-backlight { position: absolute; width: 100%; height: 100%; background: radial-gradient(circle, rgba(255,255,255,0.2), transparent); z-index: -1; }
  </style>
</head>
<body>
  <div class="status-header">
    <h1>minicontrol</h1>
    <div id="connection-status" class="connection-status disconnected">
      <span id="dot">‚óè</span> MiniChord disconnected
    </div>
  </div>
  <div id="control">
    <div id="header">
      <div class="section">
        <h5 class="active">saving:</h5>
      </div>
      <div class="controls">
        <div class="button_div">
          <div class="select_container">
            <span class="label active small">target bank:</span>
            <select id="bank_number_selection">
              <option value="0">1</option>
              <option value="1">2</option>
              <option value="2">3</option>
              <option value="3">4</option>
              <option value="4">5</option>
              <option value="5">6</option>
              <option value="6">7</option>
              <option value="7">8</option>
              <option value="8">9</option>
              <option value="9">10</option>
              <option value="10">11</option>
              <option value="11">12</option>
            </select>
          </div>
        </div>
        <div class="button_div">
          <button id="save-to-bank-btn" class="active">save to bank</button>
        </div>
      </div>
      <div class="section">
        <h5 class="active">sharing:</h5>
      </div>
      <div class="controls">
        <div class="button_div">
          <button id="export-settings-btn" class="active">export settings</button>
        </div>
        <div class="button_div">
          <button id="load-settings-btn" class="active">load settings</button>
        </div>
      </div>
      <div class="section">
        <h5 class="active">resetting:</h5>
      </div>
      <div class="controls">
        <div class="button_div">
          <button id="reset-bank-btn" class="active">reset bank</button>
        </div>
        <div class="button_div">
          <button id="reset-all-banks-btn" class="active">reset all banks</button>
        </div>
      </div>
    </div>
    <details>
      <summary><b>Connection instruction</b></summary>
      <ul class="instruction_steps">
        <li>provide the system authorization for MIDI control</li>
        <li>use a recent version of Chrome</li>
        <li>connect the minichord with a USB cable and make sure it is on.</li>
      </ul>
      <div tabindex="1" id="information_zone">
        <strong id="information_text"></strong>
      </div>
    </details>
    <div id="instruction_zone">
      For instruction on how to use this tool, please refer to the 
      <a href="../user_manual/#custom-presets">minichord documentation.</a><br><br>
      To test and load user-submitted presets, visit the 
      <a href="https://minichord.com/minicontrol/minishop.html">minishop.</a>
    </div>
  </div>
  <div id="ambient-backlight"></div>
  <div class="container">
    <svg viewBox="0 0 700 400">
      <path
        style="fill:whitesmoke;stroke:#000000;stroke-width:1;stroke-opacity:1"
        d="m 511.4994,0.50382726 c -6.7535,-0.0271 -14.5861,0.0898 -23.6547,0.34864 C 454.9865,1.7903473 463.6201,1.0484073 345.2366,13.102587 198.617,28.031847 188.754,29.036197 145.1216,33.471537 c -22.9565,2.33357 -48.214898,4.90326 -56.130198,5.71037 -21.525,2.19485 -28.4123,3.93183 -40.3332,10.17185 -9.6533,5.05308 -17.4352,11.15584 -24.6647,19.34439 -21.9696996,24.88418 -29.1190996,59.990873 -18.9509996,93.058723 8.5562996,27.82626 27.9523996,49.57621 53.7306996,60.25126 3.404,1.40962 63.537698,19.24127 87.739698,26.01814 9.2083,2.57845 20.9111,5.11753 30.6085,6.63977 17.9151,2.81219 25.7704,3.30237 52.9364,3.30386 21.47,9.9e-4 27.8923,0.2766 35.6429,1.52762 24.3498,3.93028 46.1506,12.81609 66.3186,27.03202 12.4069,8.74538 22.0415,18.08713 31.5288,30.57091 12.6588,16.65688 24.7363,28.97285 42.21,43.04341 15.2757,12.30066 24.9762,18.28955 39.8839,24.62356 16.297,6.92438 34.8066,11.69387 54.9562,14.16038 7.4637,0.91361 26.0595,0.65711 34.7825,-0.47975 34.553,-4.50337 67.1978,-19.18996 94.1445,-42.35487 7.1975,-6.18744 18.6867,-18.0284 24.5469,-25.29754 23.8585,-29.59476 39.0581,-65.88406 43.8305,-104.64749 6.9603,-56.53547 -9.0179,-113.71212 -43.8341,-156.856633 -5.2773,-6.53975 -16.5654,-18.3336 -22.6882,-23.70486 C 604.1581,21.705877 572.3074,6.9479273 537.0039,1.8585873 531.014,0.99509726 522.7553,0.54905726 511.4994,0.50382726 Z"
        id="path1662" />
      <!-- Chord Buttons -->
      <g id="chord-buttons">
        <rect class="chord-button" id="chord-1-1" x="70" y="70" width="40" height="40" />
        <rect class="chord-button" id="chord-1-2" x="120" y="70" width="40" height="40" />
        <rect class="chord-button" id="chord-1-3" x="170" y="70" width="40" height="40" />
        <rect class="chord-button" id="chord-1-4" x="220" y="70" width="40" height="40" />
        <rect class="chord-button" id="chord-1-5" x="270" y="70" width="40" height="40" />
        <rect class="chord-button" id="chord-1-6" x="320" y="70" width="40" height="40" />
        <rect class="chord-button" id="chord-1-7" x="370" y="70" width="40" height="40" />
        <rect class="chord-button" id="chord-2-1" x="95" y="120" width="40" height="40" />
        <rect class="chord-button" id="chord-2-2" x="145" y="120" width="40" height="40" />
        <rect class="chord-button" id="chord-2-3" x="195" y="120" width="40" height="40" />
        <rect class="chord-button" id="chord-2-4" x="245" y="120" width="40" height="40" />
        <rect class="chord-button" id="chord-2-5" x="295" y="120" width="40" height="40" />
        <rect class="chord-button" id="chord-2-6" x="345" y="120" width="40" height="40" />
        <rect class="chord-button" id="chord-2-7" x="395" y="120" width="40" height="40" />
        <rect class="chord-button" id="chord-3-1" x="115" y="170" width="40" height="40" />
        <rect class="chord-button" id="chord-3-2" x="165" y="170" width="40" height="40" />
        <rect class="chord-button" id="chord-3-3" x="215" y="170" width="40" height="40" />
        <rect class="chord-button" id="chord-3-4" x="265" y="170" width="40" height="40" />
        <rect class="chord-button" id="chord-3-5" x="315" y="170" width="40" height="40" />
        <rect class="chord-button" id="chord-3-6" x="365" y="170" width="40" height="40" />
        <rect class="chord-button" id="chord-3-7" x="415" y="170" width="40" height="40" />
      </g>
      <!-- Sharp and Rhythm Buttons -->
      <rect class="sharp-button" id="sharp-button" x="40" y="70" width="20" height="20" />
      <rect class="rhythm-button" id="rhythm-button" x="425" y="35" width="20" height="20" />
      <!-- Touchplate Harp -->
      <path class="harp-plate" id="harp-plate" transform="translate(500,70)" style="stroke:#333;stroke-width:2;stroke-opacity:1" d="m 3.89217,0.50002186 c -1.56452,0.0091 -2.15151,0.382886 -2.8587,1.82173904 C 0.63583,3.1307669 0.5,34.968327 0.5,127.53763 V 251.669 l 0.96101,1.30859 c 0.52865,0.71974 1.4156,1.31048 1.97101,1.31247 1.21622,0.004 45.74787,-6.41762 46.575,-6.71657 0.39851,-0.14405 0.57971,-1.43885 0.57971,-4.14402 0,-4.46999 0.28679,-4.18823 -4.86955,-4.79201 -4.76487,-0.55794 -4.45577,-0.13672 -4.30616,-5.86293 l 0.13227,-5.04324 3.84777,-0.58494 c 5.48172,-0.83301 5.19567,-0.56645 5.19567,-4.83954 0,-4.19166 0.36252,-3.86973 -5.10143,-4.53494 -4.49566,-0.54734 -4.22324,-0.15525 -4.07428,-5.85711 l 0.13227,-5.04325 3.84777,-0.58493 c 5.48343,-0.83328 5.19567,-0.56467 5.19567,-4.857 v -3.71817 l -1.50724,-0.27355 c -0.82899,-0.15066 -2.86376,-0.43996 -4.52172,-0.64314 l -3.01448,-0.36959 -0.13227,-5.07719 c -0.15091,-5.80431 -0.70279,-5.15479 5.19655,-6.11708 1.76523,-0.28795 3.38261,-0.63796 3.59418,-0.77798 0.6528,-0.43208 0.47031,-7.63969 -0.19473,-7.68952 -0.31884,-0.0239 -2.35361,-0.30684 -4.52172,-0.62858 l -3.94201,-0.58494 -0.13227,-5.06944 c -0.12837,-4.92988 -0.10286,-5.07568 0.92753,-5.31291 1.07311,-0.24706 7.51241,-1.27367 7.98912,-1.27367 0.14242,0 0.25906,-1.77465 0.25906,-3.94322 v -3.94225 l -1.97101,-0.29101 c -1.08405,-0.1599 -3.11883,-0.45519 -4.52172,-0.65672 l -2.55071,-0.36667 -0.13227,-5.07138 c -0.12837,-4.93167 -0.10286,-5.07762 0.92753,-5.31486 1.07311,-0.24706 7.51241,-1.27367 7.98912,-1.27367 0.14242,0 0.25906,-1.77465 0.25906,-3.94322 v -3.94225 l -1.97101,-0.29101 c -1.08405,-0.15991 -3.11883,-0.4552 -4.52172,-0.65672 l -2.55071,-0.36667 -0.13227,-5.07138 c -0.12837,-4.93167 -0.10286,-5.07762 0.92753,-5.31486 1.07311,-0.24706 7.51241,-1.27367 7.98912,-1.27367 0.14242,0 0.25906,-1.76308 0.25906,-3.91799 v -3.918 l -1.50724,-0.29004 c -0.82899,-0.15938 -2.91593,-0.43795 -4.63766,-0.61986 l -3.13042,-0.33079 v -5.10726 -5.10727 l 1.27535,-0.27743 c 1.53771,-0.33547 7.1638,-1.28198 7.65214,-1.28725 0.1913,-0.002 0.34783,-1.764923 0.34783,-3.917023 v -3.91315 l -3.49731,-0.55681 c -1.92347,-0.30637 -4.01042,-0.5568 -4.63766,-0.5568 -1.14049,0 -1.14035,-0.009 -1.14035,-5.17517 v -5.17614 l 1.27535,-0.26094 c 0.70145,-0.14367 2.21448,-0.39681 3.36231,-0.56263 4.99768,-0.72201 4.63766,-0.37379 4.63766,-4.47965 0,-2.0109 -0.20643,-3.79297 -0.45834,-3.95971 -0.25197,-0.16674 -2.33892,-0.55149 -4.63766,-0.85461 l -4.17932,-0.55098 v -5.37863 -5.37863 l 1.27535,-0.26094 c 0.70145,-0.14366 2.21448,-0.3968 3.36231,-0.56262 4.99768,-0.72202 4.63766,-0.37379 4.63766,-4.47966 0,-2.0109 -0.20643,-3.79296 -0.45834,-3.9597 -0.25197,-0.16674 -2.33892,-0.5515 -4.63766,-0.85461 l -4.17932,-0.55098 v -5.37863 -5.37863 l 3.3623,-0.56941 c 6.5762,-1.11234 5.91302,-0.57937 5.91302,-4.74545 0,-2.0109 -0.17591,-3.77314 -0.3904,-3.91509 -0.21445,-0.14194 -2.3014,-0.53022 -4.63766,-0.86333 l -4.24726,-0.60531 v -5.125696 c 0,-2.81903 0.15652,-5.127596 0.34782,-5.129582 0.48835,-0.0053 6.11443,-0.951777 7.65214,-1.287247 1.26098,-0.275126 1.27536,-0.320933 1.27536,-4.181848 0,-2.147484 -0.17387,-4.0205581 -0.38679,-4.1614751 C 49.56876,9.3131719 5.31505,0.49172786 3.89217,0.50002186 Z M 37.08404,51.671667 c -2.67491,0.0949 -4.8067,3.46048 -2.9112,6.35862 0.40988,0.62672 1.19248,1.33233 1.73912,1.56856 0.5466,0.23623 1.05215,0.4444 1.12408,0.46174 0.072,0.0173 0.82657,-0.28023 1.67661,-0.6606 2.77304,-1.24083 3.14433,-5.0997 0.6694,-6.95616 -0.75757,-0.56826 -1.54903,-0.79872 -2.29801,-0.77216 z m 0.16213,62.547323 c -0.92011,-0.008 -1.87162,0.36214 -2.68024,1.22807 -1.40818,1.50807 -1.47853,3.64739 -0.17753,5.41865 0.71063,0.96753 1.38378,1.30858 2.58151,1.30858 2.18294,0 3.21983,-0.67768 3.80886,-2.48718 0.96505,-2.96459 -1.18112,-5.44843 -3.5326,-5.46812 z m 0.0207,62.58804 c -3.36926,0 -5.05709,4.20414 -2.70112,6.72725 2.01882,2.162 5.23717,1.4289 6.24999,-1.42403 0.87875,-2.47511 -1.0137,-5.30322 -3.54887,-5.30322 z m 0.13314,62.21265 c -1.05442,-0.0345 -2.14403,0.43847 -3.03261,1.45991 -1.66566,1.91469 -0.83571,5.33196 1.54439,6.36057 1.32043,0.57064 1.43586,0.57159 2.82062,0.008 0.65567,-0.26696 1.52927,-1.24212 1.94114,-2.16707 0.64835,-1.45605 0.66333,-1.87168 0.11321,-3.09734 -0.73428,-1.63595 -2.03111,-2.51946 -3.38675,-2.56382 z" />
      <!-- Potentiometers -->
      <circle class="pot" id="chord-volume-pot" cx="625" cy="120" r="20" />
      <circle class="pot" id="harp-volume-pot" cx="625" cy="180" r="20" />
      <circle class="pot" id="mod-pot" cx="625" cy="240" r="20" />
      <!-- Preset Buttons -->
      <polygon class="preset-button" id="preset-up" points="610,310 630,310 620,290" />
      <polygon class="preset-button" id="preset-down" points="610,330 630,330 620,350" />
      <!-- Power LED -->
      <circle class="led" id="power_led" cx="450" cy="275" r="10" />
    </svg>
    <div class="modal" id="settings-modal" style="display: none;"></div>
    <div class="modal" id="rhythm-modal" style="display: none;"></div>
  </div>
  <script src="minichordcontroller.js"></script>
  <script src="index.js"></script>
</body>
</html>